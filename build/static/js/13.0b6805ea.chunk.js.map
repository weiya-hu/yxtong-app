{"version":3,"sources":["public/images/mainbackground.jpg","views/login/popupLogin.tsx","public/images/cha.png","views/home.tsx"],"names":["PopupLogin","state","loginSwitch","warnMessage","mobileValue","acode","captchaShow","submit","value","a","console","log","username","util","validate_mobile","mobile","captcha","validate_captcha","message","validate_password","pass","validate_yzm","sms","setState","data","type","dologin","res","status","window","location","href","errno","body","$message","info","close","props","show","this","className","id","style","height","src","mainbackground","alt","onClick","onFinish","onFinishFailed","GETFalseMessage","val","formName","name","MobileValue","Acode","warnimg","htmlType","to","wechartimg","qqimg","weiboimg","chaimg","Component","Home","popupLoginShow","login"],"mappings":"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","file":"static/js/13.0b6805ea.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/mainbackground.ce40917a.jpg\";","import { Component } from 'react'\r\nimport * as ReactDOM from 'react-dom';\r\nimport './popupLogin.scss'\r\nimport { Form , Button} from 'antd';\r\nimport InputComponent from './component/inputComponent';\r\nimport { util } from '../../utils/user'\r\nimport {BrowserRouter as Router, Link } from 'react-router-dom';\r\nimport {dologin} from '../../service/login'\r\nimport $message from '../component/message';\r\n\r\nimport weiboimg from '../../public/images/weibo.png'\r\nimport qqimg from '../../public/images/QQ.png'\r\nimport wechartimg from '../../public/images/wechart.png'\r\nimport warnimg from '../../public/images/warn.png'\r\nimport mainbackground from '../../public/images/mainbackground.jpg'\r\nimport chaimg from '../../public/images/cha.png'\r\n\r\ninterface PopupLoginState{\r\n    show?:(val:boolean)=>void\r\n}\r\n\r\nexport default class PopupLogin extends Component<PopupLoginState> {\r\n    state={\r\n        loginSwitch:0,\r\n        warnMessage:'',\r\n        mobileValue:'',\r\n        acode:'86',\r\n        captchaShow:false,\r\n     }\r\n     submit=async(value)=>{\r\n        console.log(value)\r\n        let {loginSwitch} = this.state,message\r\n        if(loginSwitch){    \r\n            let username = util.validate_mobile(value.mobile)\r\n            if(value.captcha){\r\n                let captcha =  util.validate_captcha(value.captcha)\r\n                message = username?username:captcha?captcha:util.validate_password(value.pass) \r\n            }else{\r\n                message = username?username:util.validate_password(value.pass) \r\n            }\r\n            \r\n        }else{\r\n            let mobile = util.validate_mobile(value.mobile)     \r\n            if(value.captcha){\r\n                let captcha =  util.validate_captcha(value.captcha)\r\n                message = mobile?mobile:captcha?captcha:util.validate_yzm(value.sms)   \r\n            }else{\r\n                message = mobile?mobile:util.validate_yzm(value.sms)\r\n            }\r\n        }\r\n        this.setState({warnMessage:message})\r\n        value.acode && (value.acode='+'+value.acode)\r\n        if(!message){\r\n            let data:API.UserLogin = {\r\n                type:loginSwitch?2:1,\r\n                ...value,\r\n            }\r\n            const res = await dologin(data)\r\n            if(res.status){\r\n                window.location.href = ('/')\r\n            }else{\r\n                if(res.errno && res.body>=3 || res.message==='captcha: 不能为空'){\r\n                    this.setState({captchaShow:true})\r\n                }\r\n            }\r\n                $message.info(res.message)\r\n        }\r\n    }\r\n    close=()=>{\r\n        this.props.show(false)\r\n    }\r\n    componentDidMount(){\r\n\r\n    }\r\n    render(){\r\n        let {loginSwitch,warnMessage,mobileValue,acode,captchaShow}=this.state\r\n        return (\r\n            <div className='popuplogin-item fleximg' id='popuplogin-item'>0\r\n                <div className='flexll popuplogin'>\r\n                    <div className='fleximgtop mainimg' style={{height:'100px'}}>\r\n                        <img src={mainbackground} alt=\"main\" />\r\n                    </div>\r\n                    <div className='loginmain'>\r\n                        <div className='loginswitch flexl'>\r\n                            <div \r\n                                onClick={()=>{this.setState({loginSwitch:0,warnMessage:''})}}\r\n                                className={loginSwitch == 0?'fleximg activeborder':'fleximg'}>\r\n                                    手机号登录\r\n                            </div>\r\n                            <div \r\n                                onClick={()=>{this.setState({loginSwitch:1,warnMessage:''})}}\r\n                                className={loginSwitch == 1?'fleximg activeborder':'fleximg'}>\r\n                                账户登录\r\n                            </div>\r\n                        </div>\r\n                        <Form\r\n                            className=\" topForm\"\r\n                            onFinish={this.submit}\r\n                            onFinishFailed={this.submit}\r\n                        >\r\n                                {!loginSwitch?(\r\n                                    <div >\r\n                                        <div className='marg'>\r\n                                            <InputComponent  \r\n                                                GETFalseMessage={(val)=>{this.setState({warnMessage:val})}} \r\n                                                formName='mobile' \r\n                                                name='mobile' \r\n                                                height='short'\r\n                                                MobileValue={(val)=>{this.setState({mobileValue:val})}} \r\n                                                Acode={(val)=>{this.setState({acode:val})}}\r\n                                            />\r\n                                        </div> \r\n                                        {captchaShow && <div className='marg'>\r\n                                            <InputComponent \r\n                                                GETFalseMessage={(val)=>{this.setState({warnMessage:val})}} \r\n                                                height='short'\r\n                                                formName='captcha' \r\n                                                name='captcha' \r\n                                            />\r\n                                        </div>\r\n                                        }        \r\n                                        <div className='marg'>\r\n                                            <InputComponent  \r\n                                                GETFalseMessage={(val)=>{this.setState({warnMessage:val})}} \r\n                                                formName='sms' \r\n                                                name='mobileYZM' \r\n                                                height='short'\r\n                                                mobileValue={mobileValue}\r\n                                                acode={acode}\r\n                                            />\r\n                                        </div>\r\n                                </div>\r\n                            ):(\r\n                                <div>\r\n                                    <div className='marg'>\r\n                                    <InputComponent \r\n                                        GETFalseMessage={(val)=>{this.setState({warnMessage:val})}} \r\n                                        formName='mobile' \r\n                                        name='mobile' \r\n                                        height='short'\r\n                                        MobileValue={(val)=>{this.setState({mobileValue:val})}} \r\n                                        Acode={(val)=>{this.setState({acode:val})}}\r\n                                    />\r\n                                    </div>   \r\n                                    {captchaShow && <div className='marg'>\r\n                                            <InputComponent \r\n                                                GETFalseMessage={(val)=>{this.setState({warnMessage:val})}} \r\n                                                height='short'\r\n                                                formName='captcha' \r\n                                                name='captcha' \r\n                                            />\r\n                                        </div>\r\n                                        }  \r\n                                    <div className='marg'>\r\n                                        <InputComponent  GETFalseMessage={(val)=>{this.setState({warnMessage:val})}} formName='pass' name='password' height='short'/>\r\n                                    </div>                                \r\n                                </div>\r\n                            )}\r\n                            {warnMessage && \r\n                                <div className='warn flexl'>\r\n                                    <div><img src={warnimg} alt=\"warn\" /></div>\r\n                                    <span>{warnMessage}</span>\r\n                                </div>\r\n                            }\r\n                            \r\n                            <Button className='loginbt' htmlType=\"submit\">登录</Button>\r\n                        </Form>\r\n                        {loginSwitch ?\r\n                            <div className='forget flexb'>\r\n                                <Link to='/app/register/forget'><span>忘记密码？</span></Link>\r\n                                \r\n                                <Link to='/app/register/register'><span>免费注册</span></Link>\r\n                            </div>:\r\n                            <div></div>\r\n                        }\r\n                        <div className='fleximg'>\r\n                            <div className={!loginSwitch?'fleximg wechartimg':'fleximg wechartimg wechartimguser'}>\r\n                                <img src={wechartimg}/>\r\n                            </div>\r\n                            <div className={!loginSwitch?'fleximg wechartimg':'fleximg wechartimg wechartimguser'}>\r\n                                <img src={qqimg}/>\r\n                            </div>\r\n                            <div className={!loginSwitch?'fleximg wechartimg':'fleximg wechartimg wechartimguser'}>\r\n                                <img src={weiboimg}/>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className='chaimg fleximgtop' onClick={this.close}>\r\n                        <img src={chaimg} alt=\"×\" />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n        \r\n    }\r\n    \r\n}\r\n// 挂载容器到页面\r\n function createMessage(dom){\r\n    let el = document.getElementById('popuplogin-item');\r\n    // 这一步是必要的的，因为在执行到这里的时候，页面还没有挂载，所以获取不到el节点\r\n    if (!el) {\r\n        el = document.createElement('div')\r\n        el.className = 'popuplogin-item'\r\n        el.id = 'popuplogin-item'\r\n        \r\n    }\r\n    dom.append(el)\r\n    ReactDOM.render( <PopupLogin />, el);\r\n  }","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAEKADAAQAAAABAAAAEAAAAAA0VXHyAAAA/klEQVQ4EcVSQQ6CMBCkGH7g0fRAeIXceQYJSLz4Cf6hxj+gD+CCV/0AXPgHdUfZppRy8UKTZmF2Zna7reetvTbcQJIkeRiGpzRNH3VdK8bNWJalHwTBOYqibdu2L+R8Jiil9rQPTdNcQGScIzDkwAGXcU2M4/gohLhRMrNNDHEGDrhsIPgD0UEsgI+VWVwQbwCONTEAYJsAQ1dj5YkYuZkBQNPkS/q1PRMjp2eAn3+WvkYWm9XRNu03jtD3vaQrvttXPDGwxTTtQkpZQbxkog1cYsIGVETlJRNtgBdGVXLXtB0mu67rKhxbD5GET9pXtI3KPBOOwJADB1zG148fDfDVwnBmctEAAAAASUVORK5CYII=\"","\r\nimport { Component } from 'react'\r\nimport PopupLogin from './login/popupLogin'\r\n\r\n\r\nexport default class Home extends Component {\r\n    state={\r\n        popupLoginShow:false\r\n    }\r\n    \r\n    componentDidMount(){\r\n\r\n    }\r\n    login=()=>{\r\n        this.setState({\r\n            popupLoginShow:!this.state.popupLoginShow\r\n        })\r\n    }\r\n    render(){\r\n        let {popupLoginShow}=this.state\r\n        return <div id='home'>\r\n            <div onClick={this.login}>去登录</div>\r\n            {popupLoginShow &&\r\n                <div className='block'>\r\n                    <PopupLogin show={(val)=>this.setState({popupLoginShow:val})}/>\r\n                </div>\r\n\r\n            }\r\n            \r\n        </div>\r\n    }\r\n   \r\n    \r\n}"],"sourceRoot":""}