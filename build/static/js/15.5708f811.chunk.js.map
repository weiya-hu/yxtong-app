{"version":3,"sources":["public/images/unselect.png","public/images/select.png","views/login/component/othorLogin/phoneBindLogin/phoneBindLogin.tsx"],"names":["phoneBindLogin","state","warnMessage","inviteCode","sessionStorage","getItem","agree","mobileValue","acode","captchaShow","header","name","registerSubmit","value","a","console","log","mobile","util","validate_mobile","captcha","validate_captcha","message","validate_yzm","sms","setState","doBindPhone","type","res","$message","info","status","window","location","href","errno","body","toIndex","getUrlParam","reg","RegExp","r","search","substring","match","decodeURI","document","title","style","overflow","this","id","className","src","logoimg","alt","onClick","onFinish","onFinishFailed","GETFalseMessage","val","formName","MobileValue","Acode","defaultValue","warnimg","htmlType","selectimg","unselectimg","Component"],"mappings":"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","file":"static/js/15.5708f811.chunk.js","sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAEKADAAQAAAABAAAAEAAAAAA0VXHyAAAAwklEQVQ4Ee1Tuw6DMAzEqEkhUBqJhTV8Wzv3W7r314CVBQmaCJQgQW2pI+Kxc0sS23exLB94iKIo7gDwnOf5Ru8tYK1RSr3xdIAkXpalFUIMQRCEW2TKG2McguNVXqqqenHOXZZlu8gkIKXkdV0PiIePbYgoikjtEKhb7D7xD7EWik8BzztngDPAbTLW2mFhR1ZDWuuRTAVN0yRt23aMsTGOY7bK+ifpw77vwzzPr0AxciSZinyxR2CaJo2G+qRp+v0BoZlOXV2BwcYAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAADqADAAQAAAABAAAADgAAAAC98Dn6AAABB0lEQVQoFWM08J/hxcDIMJPh/38ZBmIAI+MThv8M6UwkaQIZDLIAaBET0TYhuwaomQmZj4vNyMjwmomRqZCBkfEXTA1BjSBNzIysTuc2pE8AairDqpGRkfE5TAJEwzSdWZ9yxTR4ljbQg1UwebiNjAyMTfwM7FpA+gw2Tb///t0HDE0xVI2MDP8YmBkuH9iQ+IGfkd0VaNN2kPNgNqFrAhts4D/9P5jBwPCHgZkx8vy6jDUwU0HOw6YJJA93KlA3C8Pf/8sNg2aEgCTwaQLJM8JsBHFAgBFoM9Cp1f8YGIqR/QSRRZAsCCaEBbL5/3+GTnRxdD4wyQHTHqkAqAeY5BjSSdIMTeQAZWpfyGO+54EAAAAASUVORK5CYII=\"","\r\n\r\nimport { Component } from 'react'\r\nimport './phoneBindLogin.scss'\r\nimport { Form , Button} from 'antd';\r\nimport InputComponent from 'views/login/component/inputComponent';\r\nimport { util } from 'utils/user'\r\n\r\nimport {doBindPhone} from 'service/login'\r\nimport $message from 'views/component/message';\r\n\r\n\r\nimport logoimg from 'public/images/logow.png'\r\nimport warnimg from 'public/images/warn.png'\r\nimport unselectimg from 'public/images/unselect.png'\r\nimport selectimg from 'public/images/select.png'\r\n\r\nexport default class phoneBindLogin extends Component {\r\n    state={\r\n        warnMessage:'',//input框验证错误\r\n        inviteCode:sessionStorage.getItem('inviteCode')?sessionStorage.getItem('inviteCode'):'',//邀请码默认值\r\n        agree:false,//是否阅读并同意协议的默认值\r\n        mobileValue:'',\r\n        acode:'86',\r\n        captchaShow:false,//图形验证码是否显示\r\n        header:'',//用户微信头像\r\n        name:'',//用户微信名\r\n    }\r\n    \r\n    registerSubmit=async(value)=>{\r\n        console.log(value)\r\n        let mobile = util.validate_mobile(value.mobile),message  \r\n        let {captchaShow} = this.state\r\n        if(captchaShow){\r\n            let captcha =  util.validate_captcha(value.captcha)\r\n            message = mobile?mobile:captcha?captcha:util.validate_yzm(value.sms)\r\n        }else{\r\n            message = mobile?mobile:util.validate_yzm(value.sms)\r\n        }\r\n        this.setState({warnMessage:message})\r\n        if(!message){\r\n            if(!this.state.agree){\r\n                this.setState({warnMessage:'请阅读并同意《药智网用户须知》'})\r\n            }else{\r\n                console.log('meiwenti')\r\n                value.acode='+'+value.acode\r\n                const res =await doBindPhone({...value,type:3})\r\n                $message.info(res.message)\r\n                if(res.status){\r\n                    window.location.href='/'\r\n                }else{\r\n                    if(res.errno && res.body>=3 || res.message==='captcha: 不能为空'){\r\n                        this.setState({captchaShow:true})\r\n                    }else{\r\n                        $message.info(res.message)\r\n                    }\r\n                    \r\n                }            \r\n                \r\n            }            \r\n        }      \r\n    }\r\n    toIndex=()=>{\r\n        window.location.href='/'\r\n    }\r\n    getUrlParam=(name)=>{\r\n        var reg = new RegExp(\"(^|&)\"+ name +\"=([^&]*)(&|$)\");\r\n        var r = window.location.search.substring(1).match(reg);\r\n        if(r!=null)return  decodeURI(r[2]); return null;\r\n    }\r\n    componentDidMount(){\r\n        document.title = '康州数智-绑定手机号码'\r\n        document.body.style.overflow='hidden'\r\n        this.setState({\r\n            header:this.getUrlParam('headimgurl'),//用户微信头像\r\n            name:this.getUrlParam('nickname'),//用户微信名\r\n        })\r\n    }\r\n    render(){\r\n        let {warnMessage,mobileValue,acode,captchaShow,header,name} = this.state\r\n        return <div id='register'>\r\n            <div className='content'>\r\n                <div className='logoimg fleximg'><img src={logoimg} alt=\"logo\" onClick={this.toIndex} /></div>\r\n                \r\n                    <div className='forget'>\r\n                        <div className='forgettitle'>手机号绑定</div>\r\n                        <div className='fleximgc wx-info'>\r\n                            <div className='headerimg fleximg'><img src={header} alt=\"header\" /></div>\r\n                            <div>{name}</div>\r\n                        </div>\r\n                        <div className='forgetform'>\r\n                            <Form\r\n                                onFinish={this.registerSubmit}\r\n                                onFinishFailed={this.registerSubmit}\r\n                            >\r\n                                <div className='marg'>\r\n                                    <InputComponent \r\n                                        GETFalseMessage={(val)=>{this.setState({warnMessage:val})}} \r\n                                        formName='mobile' \r\n                                        name='mobile'\r\n                                        MobileValue={(val)=>{this.setState({mobileValue:val})}} \r\n                                        Acode={(val)=>{this.setState({acode:val})}}\r\n                                    />\r\n                                </div>\r\n                                {captchaShow && <div className='marg'>\r\n                                    <InputComponent \r\n                                        GETFalseMessage={(val)=>{this.setState({warnMessage:val})}} \r\n                                        formName='captcha' \r\n                                        name='captcha' \r\n                                    />\r\n                                </div>\r\n                                }      \r\n                                <div className='marg'>\r\n                                    <InputComponent \r\n                                        GETFalseMessage={(val)=>{this.setState({warnMessage:val})}} \r\n                                        formName='sms' \r\n                                        name='mobileYZM'\r\n                                        mobileValue={mobileValue}\r\n                                        acode={acode}\r\n                                    />\r\n                                </div>\r\n                                <div className='marg'>\r\n                                    <InputComponent GETFalseMessage={(val)=>{this.setState({warnMessage:val})}} formName='invite_code' name='inviteCode' defaultValue={this.state.inviteCode}/>\r\n                                </div>\r\n                                {\r\n                                    warnMessage && <div className='warnnext flexll'>\r\n                                    <div><img src={warnimg} alt=\"warn\" /></div>\r\n                                    <span>{warnMessage}</span>\r\n                                </div> \r\n                                }\r\n                                \r\n                                <Button className='forgetnextbt' htmlType=\"submit\">绑定手机</Button>\r\n                                <div className='flexl agree' onClick={()=>{this.setState({agree:!this.state.agree})}}>\r\n                                    {this.state.agree?\r\n                                        (<div><img src={selectimg} alt=\"checked\" /></div> ):\r\n                                        (<div><img src={unselectimg} alt=\"unchecked\" /></div> )\r\n                                    }\r\n                                    <span>我已阅读并同意</span>\r\n                                    <span className='Link'>《药智网用户须知》</span>\r\n                                    {/* <Link>《药智网用户须知》</Link>                                    */}\r\n                                </div>\r\n                            </Form>\r\n                        </div>\r\n                    </div>\r\n               \r\n            </div>\r\n        </div>\r\n    }\r\n    \r\n}"],"sourceRoot":""}