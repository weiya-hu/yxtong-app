{"version":3,"sources":["public/images/unselect.png","public/images/select.png","views/login/register.tsx"],"names":["Register","state","isForget","warnMessage","registermessage","inviteCode","sessionStorage","getItem","agree","mobileValue","acode","nextSubmit","value","console","log","message","mobile","util","validate_mobile","validate_yzm","sms","setState","countryCode","okSubmit","registerPassword","validate_passwordRegister","surePassword","registerSubmit","a","mobileYZM","pass","doreg","res","status","window","location","href","$message","info","toIndex","pathname","this","props","split","document","title","body","style","overflow","id","className","src","logoimg","alt","onClick","onFinish","onFinishFailed","GETFalseMessage","val","formName","name","MobileValue","Acode","warnimg","htmlType","type","defaultValue","selectimg","unselectimg","open","protocol","host","Component"],"mappings":"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","file":"static/js/16.9c938b19.chunk.js","sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAEKADAAQAAAABAAAAEAAAAAA0VXHyAAAAwklEQVQ4Ee1Tuw6DMAzEqEkhUBqJhTV8Wzv3W7r314CVBQmaCJQgQW2pI+Kxc0sS23exLB94iKIo7gDwnOf5Ru8tYK1RSr3xdIAkXpalFUIMQRCEW2TKG2McguNVXqqqenHOXZZlu8gkIKXkdV0PiIePbYgoikjtEKhb7D7xD7EWik8BzztngDPAbTLW2mFhR1ZDWuuRTAVN0yRt23aMsTGOY7bK+ifpw77vwzzPr0AxciSZinyxR2CaJo2G+qRp+v0BoZlOXV2BwcYAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAADqADAAQAAAABAAAADgAAAAC98Dn6AAABB0lEQVQoFWM08J/hxcDIMJPh/38ZBmIAI+MThv8M6UwkaQIZDLIAaBET0TYhuwaomQmZj4vNyMjwmomRqZCBkfEXTA1BjSBNzIysTuc2pE8AairDqpGRkfE5TAJEwzSdWZ9yxTR4ljbQg1UwebiNjAyMTfwM7FpA+gw2Tb///t0HDE0xVI2MDP8YmBkuH9iQ+IGfkd0VaNN2kPNgNqFrAhts4D/9P5jBwPCHgZkx8vy6jDUwU0HOw6YJJA93KlA3C8Pf/8sNg2aEgCTwaQLJM8JsBHFAgBFoM9Cp1f8YGIqR/QSRRZAsCCaEBbL5/3+GTnRxdD4wyQHTHqkAqAeY5BjSSdIMTeQAZWpfyGO+54EAAAAASUVORK5CYII=\"","//@ts-nocheck\r\nimport { Component } from 'react'\r\nimport './register.scss'\r\nimport { Form , Button} from 'antd';\r\nimport InputComponent from './component/inputComponent';\r\nimport { util } from 'utils/user'\r\nimport {doreg} from 'service/login'\r\nimport $message from 'views/component/message';\r\n\r\n\r\nimport logoimg from 'public/images/logow.png'\r\nimport warnimg from 'public/images/warn.png'\r\nimport unselectimg from 'public/images/unselect.png'\r\nimport selectimg from 'public/images/select.png'\r\n\r\nexport default class Register extends Component {\r\n    state={\r\n        isForget:'',//模式选择，是忘记密码还是注册，候选值有forget,next,register\r\n        warnMessage:'',//input框验证错误\r\n        registermessage:'密码长度在6~18之间,不能只是数字或字母',\r\n        inviteCode:sessionStorage.getItem('inviteCode')?sessionStorage.getItem('inviteCode'):'',//邀请码默认值\r\n        agree:false,//是否阅读并同意协议的默认值\r\n        mobileValue:'',\r\n        acode:'86',\r\n    }\r\n    nextSubmit=(value)=>{\r\n        console.log(value)\r\n        let mobile = util.validate_mobile(value.mobile),message     \r\n        message = mobile?mobile:util.validate_yzm(value.sms)   \r\n        this.setState({warnMessage:message})\r\n        if(!message){\r\n            value.countryCode = value.countryCode?value.countryCode:'86'\r\n            console.log('下一步ok')\r\n            console.log(value)\r\n            //接口，下一步\r\n            this.setState({isForget:'next'})\r\n        }\r\n        \r\n    }\r\n    okSubmit=(value)=>{\r\n        console.log(value)\r\n        let registerPassword = util.validate_passwordRegister(value.registerPassword),message     \r\n        message = registerPassword?registerPassword:util.validate_passwordRegister(value.surePassword)   \r\n        if(!message && value.registerPassword === value.surePassword){\r\n            console.log('下一步ok')\r\n            //接口，完成\r\n        }       \r\n    }\r\n    registerSubmit=async(value)=>{\r\n        console.log(value)\r\n        let mobile = util.validate_mobile(value.mobile),message  \r\n        let mobileYZM = util.validate_yzm(value.sms)\r\n        message = mobile?mobile:(mobileYZM?mobileYZM:util.validate_passwordRegister(value.pass))   \r\n        this.setState({warnMessage:message})\r\n        if(!message){\r\n            if(!this.state.agree){\r\n                this.setState({warnMessage:'请阅读并同意《药智网用户须知》'})\r\n            }else{\r\n                value.acode='+'+value.acode\r\n                const res =await doreg({...value})\r\n                if(res.status){\r\n                    window.location.href='/'\r\n                }            \r\n                $message.info(res.message)\r\n            }            \r\n        }      \r\n    }\r\n    toIndex=()=>{\r\n        window.location.href='/'\r\n    }\r\n    componentDidMount(){\r\n        let { location } = this.props as { location }\r\n        let pathname = location.pathname.split('/')\r\n        this.setState({isForget:pathname[3]})\r\n        document.title = pathname[3] === 'forget' ? '康州数智-找回密码':pathname[3] === 'register'?'康州数智-注册':'康州数智-找回密码'\r\n        console.log(pathname[3])\r\n        document.body.style.overflow='hidden'\r\n    }\r\n    render(){\r\n        let {isForget,warnMessage,registermessage,mobileValue,acode} = this.state\r\n        return <div id='register'>\r\n            <div className='content'>\r\n                <div className='logoimg fleximg'><img src={logoimg} alt=\"logo\" onClick={this.toIndex} /></div>\r\n                {(isForget === 'forget')?(\r\n                    <div className='forget'>\r\n                        <div className='forgettitle'>找回密码</div>\r\n                        <div className='forgetform'>\r\n                            <Form\r\n                                onFinish={this.nextSubmit}\r\n                                onFinishFailed={this.nextSubmit}\r\n                            >   \r\n                                <div className='marg'>\r\n                                    <InputComponent \r\n                                        GETFalseMessage={(val)=>{this.setState({warnMessage:val})}} \r\n                                        formName='mobile' \r\n                                        name='mobile'\r\n                                        MobileValue={(val)=>{this.setState({mobileValue:val})}} \r\n                                        Acode={(val)=>{this.setState({acode:val})}}\r\n                                    />\r\n                                </div>\r\n                                <div className='marg'>\r\n                                    <InputComponent \r\n                                        GETFalseMessage={(val)=>{this.setState({warnMessage:val})}} \r\n                                        formName='sms' \r\n                                        name='mobileYZM'\r\n                                        mobileValue={mobileValue}\r\n                                        acode={acode}\r\n                                    />\r\n                                </div>\r\n                                {warnMessage && \r\n                                    <div className='warn flexl'>\r\n                                        <div><img src={warnimg} alt=\"warn\" /></div>\r\n                                        <span>{warnMessage}</span>\r\n                                    </div>\r\n                                }\r\n                                <Button className='forgetnextbt' htmlType=\"submit\">下一步</Button>\r\n                            </Form>\r\n                        </div>\r\n                    </div>\r\n                ):(isForget === 'register')?(\r\n                    <div className='forget'>\r\n                        <div className='forgettitle'>新用户注册</div>\r\n                        <div className='forgetform'>\r\n                            <Form\r\n                                onFinish={this.registerSubmit}\r\n                                onFinishFailed={this.registerSubmit}\r\n                            >\r\n                                <div className='marg'>\r\n                                    <InputComponent \r\n                                        GETFalseMessage={(val)=>{this.setState({warnMessage:val})}} \r\n                                        formName='mobile' \r\n                                        name='mobile'\r\n                                        MobileValue={(val)=>{this.setState({mobileValue:val})}} \r\n                                        Acode={(val)=>{this.setState({acode:val})}}\r\n                                    />\r\n                                </div>\r\n                                <div className='marg'>\r\n                                    <InputComponent \r\n                                        GETFalseMessage={(val)=>{this.setState({warnMessage:val})}} \r\n                                        formName='sms' \r\n                                        name='mobileYZM'\r\n                                        mobileValue={mobileValue}\r\n                                        acode={acode}\r\n                                        type='register'\r\n                                    />\r\n                                </div>\r\n                                <div className='marg'>\r\n                                    <InputComponent GETFalseMessage={(val)=>{this.setState({warnMessage:val})}} formName='pass' name='passwordRegister'/>\r\n                                </div>\r\n                                <div className='marg'>\r\n                                    <InputComponent GETFalseMessage={(val)=>{this.setState({warnMessage:val})}} formName='invite_code' name='inviteCode' defaultValue={this.state.inviteCode}/>\r\n                                </div>\r\n                                {\r\n                                    warnMessage && <div className='warnnext flexll'>\r\n                                    <div><img src={warnimg} alt=\"warn\" /></div>\r\n                                    <span>{warnMessage}</span>\r\n                                </div> \r\n                                }\r\n                                \r\n                                <Button className='forgetnextbt' htmlType=\"submit\">免费注册</Button>\r\n                                <div className='flexl agree' onClick={()=>{this.setState({agree:!this.state.agree})}}>\r\n                                    {this.state.agree?\r\n                                        (<div><img src={selectimg} alt=\"checked\" /></div> ):\r\n                                        (<div><img src={unselectimg} alt=\"unchecked\" /></div> )\r\n                                    }\r\n                                    <span>我已阅读并同意</span>\r\n                                    <span className='Link' onClick={()=>{window.open(window.location.protocol+'//'+window.location.host+'/app/useragreement', \"_blank\");}}>《药智网用户须知》</span>\r\n                                </div>\r\n                            </Form>\r\n                        </div>\r\n                    </div>\r\n                ):(\r\n                    <div className='forget'>\r\n                        <div className='forgettitle'>找回密码</div>\r\n                        <div className='forgetform'>\r\n                            <Form\r\n                                onFinish={this.okSubmit}\r\n                                onFinishFailed={this.okSubmit}\r\n                            >\r\n                                <div className='marg'>\r\n                                    <InputComponent GETFalseMessage={(val)=>{this.setState({warnMessage:val})}} formName='registerPassword' name='passwordSure' title='登录密码'/>\r\n                                </div>\r\n                                <div className='marg'>\r\n                                    <InputComponent GETFalseMessage={(val)=>{this.setState({warnMessage:val})}} formName='surePassword' name='passwordSure' title='确认密码'/>\r\n                                </div>\r\n                                <div className='warnnext flexll'>\r\n                                    <div><img src={warnimg} alt=\"warn\" /></div>\r\n                                    <span>{registermessage}</span>\r\n                                </div>                               \r\n                                <Button className='forgetnextbt' htmlType=\"submit\">完成</Button>\r\n                            </Form>\r\n                        </div>\r\n                    </div>\r\n                )\r\n\r\n                }\r\n            </div>\r\n        </div>\r\n    }\r\n    \r\n}"],"sourceRoot":""}