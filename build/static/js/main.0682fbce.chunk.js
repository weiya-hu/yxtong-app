(this["webpackJsonpyxt-cp-app"]=this["webpackJsonpyxt-cp-app"]||[]).push([[5],{10:function(n,t,e){"use strict";e.d(t,"a",(function(){return u})),e.d(t,"b",(function(){return i}));var o=e(12),r=e.n(o),c=e(14),a=e(15);function u(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(e,o){r.a.get(n,{params:t}).then((function(n){e(n.data)})).catch((function(n){c.a.info(n),o(n)}))}))}function i(n,t){return new Promise((function(e,o){r.a.post(n,t).then((function(n){e(n.data)}),(function(n){c.a.info(n.data.message),o(n)}))}))}r.a.defaults.timeout=1e4,r.a.defaults.baseURL="/api",r.a.interceptors.request.use((function(n){n.data=JSON.stringify(n.data);var t=window.localStorage.getItem("firstToken");localStorage.getItem("type");return n.headers=t?{"Content-Type":"application/json",Authorization:t}:{"Content-Type":"application/json"},n}),(function(n){return Promise.reject(n)})),r.a.interceptors.response.use((function(n){if(10620===n.data.errno){console.log("\u767b\u5f55\u72b6\u6001\u8fc7\u671f"),localStorage.removeItem("userInfo");var t="/app/login"===window.location.pathname?"/app/login":"/app/login?url="+window.location.pathname;window.location.href=t,c.a.info("\u767b\u5f55\u72b6\u6001\u8fc7\u671f\uff0c\u8bf7\u518d\u6b21\u767b\u5f55")}return 10403===n.data.errno&&Object(a.h)().then((function(n){n.status&&(localStorage.setItem("firstToken",n.body),window.location.reload())})),n}),(function(n){console.log("\u8bf7\u6c42\u51fa\u9519\uff1a",n),c.a.info(n)}))},14:function(n,t,e){"use strict";var o,r=e(37),c=e(36),a=e(0),u=e(23),i=e(1),s=function(n){var t=n.type,e=n.text;return Object(i.jsx)("div",{className:"message ".concat(t),children:Object(i.jsx)("span",{children:e})})},l=(e(87),function(){var n=Object(a.useState)([]),t=Object(c.a)(n,2),e=t[0],u=t[1];return o=function(n){u((function(t){var e=[].concat(Object(r.a)(t),[n]);return setTimeout((function(){!function(n){var t=n.key;u((function(n){return n.filter((function(n){return t!==n.key}))}))}(n)}),1500),e}))},Object(a.useEffect)((function(){e.length>0&&e.shift()}),[e]),Object(i.jsx)(i.Fragment,{children:e.map((function(n){var t=n.text,e=n.key,o=n.type;return Object(i.jsx)(s,{type:o,text:t},e)}))})}),f=function(){return(1e3*Math.random()).toFixed()},d={info:function(n){o({text:n,key:f(),type:"info"})},success:function(n){o({text:n,key:f(),type:"success"})},warning:function(n){o({text:n,key:f(),type:"warning"})},error:function(n){o({text:n,key:f(),type:"error"})}};t.a=d;!function(){var n=document.getElementById("#message-wrap");n||((n=document.createElement("div")).className="message-wrap",n.id="message-wrap",document.body.append(n)),u.render(Object(i.jsx)(l,{}),n)}()},15:function(n,t,e){"use strict";e.d(t,"h",(function(){return r})),e.d(t,"b",(function(){return c})),e.d(t,"a",(function(){return a})),e.d(t,"f",(function(){return u})),e.d(t,"g",(function(){return i})),e.d(t,"d",(function(){return s})),e.d(t,"c",(function(){return l})),e.d(t,"e",(function(){return f}));var o=e(10),r=function(){return Object(o.a)("user/public/token")},c=function(n){return Object(o.b)("login/dologin",n)},a=function(){return Object(o.a)("user/public/captcha")},u=function(n){return Object(o.b)("login/send-sms",n)},i=function(n){return Object(o.b)("login/send-sms-reg",n)},s=function(){return Object(o.a)("user/public/get-user")},l=function(n){return Object(o.b)("login/doreg",n)},f=function(){return Object(o.a)("login/login-out")}},22:function(n,t,e){"use strict";var o=e(8),r=e(9),c={userInfo:null,loginShow:!1};var a=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.d:return Object(o.a)(Object(o.a)({},n),{},{userInfo:t.userInfo});case r.c:return Object(o.a)(Object(o.a)({},n),{},{userInfo:null});case r.b:return Object(o.a)(Object(o.a)({},n),{},{loginShow:!0});case r.a:return Object(o.a)(Object(o.a)({},n),{},{loginShow:!1});default:return n}},u=(0,e(64).createStore)(a);t.a=u},40:function(n,t,e){"use strict";e.d(t,"d",(function(){return r})),e.d(t,"c",(function(){return c})),e.d(t,"b",(function(){return a})),e.d(t,"a",(function(){return u}));var o=e(9),r=function(n){return{type:o.d,userInfo:n}},c=function(){return{type:o.c}},a=function(){return{type:o.b}},u=function(){return{type:o.a}}},41:function(n,t,e){"use strict";e.d(t,"a",(function(){return s}));var o=e(39),r=e(29),c=e.n(r),a=e(15),u=e(22),i=e(40),s={getScrollTop:function(){var n=0,t=0;return document.body&&(n=document.body.scrollTop),document.documentElement&&(t=document.documentElement.scrollTop),n-t>0?n:t},getScrollHeight:function(){var n=0,t=0;return document.body&&(n=document.body.scrollHeight),document.documentElement&&(t=document.documentElement.scrollHeight),n-t>0?n:t},getWindowHeight:function(){return"CSS1Compat"==document.compatMode?document.documentElement.clientHeight:document.body.clientHeight},getIsTOBottom:function(){return s.getScrollHeight()-s.getScrollTop()-s.getWindowHeight()},firstTokenUserinfo:function(){var n=Object(o.a)(c.a.mark((function n(){var t,e;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(localStorage.getItem("firstToken")){n.next=6;break}return n.next=4,Object(a.h)();case 4:t=n.sent,localStorage.setItem("firstToken",t.body);case 6:return n.next=8,Object(a.d)();case 8:(e=n.sent).status&&u.a.dispatch(Object(i.d)(e.body));case 10:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),getUrlParam:function(n){var t=new RegExp("(^|&)"+n+"=([^&]*)(&|$)"),e=window.location.search.substring(1).match(t);return null!=e?decodeURI(e[2]):null}}},62:function(n,t,e){},87:function(n,t,e){},88:function(n,t,e){"use strict";e.r(t);var o=e(0),r=e.n(o),c=e(23),a=e.n(c),u=(e(62),e(18)),i=e(19),s=e(20),l=e(21),f=e(11),d=e(30),p=e(2),m=e(22),b=e(1),g=function(n){Object(s.a)(e,n);var t=Object(l.a)(e);function e(n){return Object(u.a)(this,e),t.call(this,n)}return Object(i.a)(e,[{key:"render",value:function(){var n=this.props,t=n.routerConfig,e=n.location,o=e.pathname,r=m.a.getState().userInfo;console.log(o,r),console.log(e);var c=t.find((function(n){return n.path===o}));if(console.log(c),c&&!c.auth&&!r){var a=c.component;return Object(b.jsx)(p.b,{exact:!0,path:o,component:a})}return r?"/app/login"===o?Object(b.jsx)(p.a,{to:"/"}):c?Object(b.jsx)(p.b,{path:o,component:c.component}):Object(b.jsx)(p.a,{to:o}):c?c.auth?Object(b.jsx)(p.a,{to:"/app/login"}):(p.b,void c.component):Object(b.jsx)(p.a,{to:o})}}]),e}(o.Component),h=function(){return Object(b.jsx)("div",{children:"Loading..."})},j=(Object(f.a)((function(){return Promise.all([e.e(0),e.e(1),e.e(14)]).then(e.bind(null,493))}),{LoadingComponent:h}),Object(f.a)((function(){return Promise.all([e.e(0),e.e(1),e.e(15)]).then(e.bind(null,506))}),{LoadingComponent:h})),O=Object(f.a)((function(){return Promise.all([e.e(0),e.e(13)]).then(e.bind(null,510))}),{LoadingComponent:h}),v=[{path:"/app/user",name:"User",component:Object(f.a)((function(){return Promise.all([e.e(0),e.e(2),e.e(4),e.e(7),e.e(10)]).then(e.bind(null,499))}),{LoadingComponent:h}),auth:!0},{path:"/app/login",name:"Login",component:j},{path:"/app/register/register",name:"Register",component:O},{path:"/app/register/forget",name:"Register",component:O},{path:"/app/news",name:"News",component:Object(f.a)((function(){return Promise.all([e.e(0),e.e(2),e.e(3),e.e(1),e.e(11)]).then(e.bind(null,511))}),{LoadingComponent:h})},{path:"/app/newsdetail",name:"NewsDetail",component:Object(f.a)((function(){return Promise.all([e.e(0),e.e(2),e.e(3),e.e(4),e.e(9)]).then(e.bind(null,503))}),{LoadingComponent:h})},{path:"/app/newsauthormore",name:"NewsAuthorMore",component:Object(f.a)((function(){return Promise.all([e.e(0),e.e(2),e.e(3),e.e(1),e.e(12)]).then(e.bind(null,496))}),{LoadingComponent:h})}],y=function(n){Object(s.a)(e,n);var t=Object(l.a)(e);function e(){return Object(u.a)(this,e),t.apply(this,arguments)}return Object(i.a)(e,[{key:"render",value:function(){return Object(b.jsx)(d.a,{children:Object(b.jsx)(o.Fragment,{children:Object(b.jsx)(p.d,{children:Object(b.jsx)(g,{routerConfig:v})})})})}}]),e}(r.a.Component),w=y,x=function(n){n&&n instanceof Function&&e.e(16).then(e.bind(null,497)).then((function(t){var e=t.getCLS,o=t.getFID,r=t.getFCP,c=t.getLCP,a=t.getTTFB;e(n),o(n),r(n),c(n),a(n)}))};e(41).a.firstTokenUserinfo().then((function(){a.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(w,{})}),document.getElementById("root"))})),x()},9:function(n,t,e){"use strict";e.d(t,"d",(function(){return o})),e.d(t,"c",(function(){return r})),e.d(t,"b",(function(){return c})),e.d(t,"a",(function(){return a}));var o="SetUserInfo",r="RemoveUserInfo",c="LoginShow",a="LoginRemove"}},[[88,6,8]]]);
//# sourceMappingURL=main.0682fbce.chunk.js.map