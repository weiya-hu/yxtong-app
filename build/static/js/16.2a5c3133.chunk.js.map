{"version":3,"sources":["views/login/component/othorLogin/phoneBindLogin/phoneBindLogin.tsx"],"names":["phoneBindLogin","state","warnMessage","inviteCode","sessionStorage","getItem","agree","mobileValue","acode","captchaShow","registerSubmit","value","a","console","log","mobile","util","validate_mobile","captcha","validate_captcha","message","validate_yzm","sms","setState","doBindPhone","type","res","$message","info","status","window","location","href","errno","body","toIndex","document","title","style","overflow","this","id","className","src","logoimg","alt","onClick","onFinish","onFinishFailed","GETFalseMessage","val","formName","name","MobileValue","Acode","defaultValue","warnimg","htmlType","selectimg","unselectimg","Component"],"mappings":"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","file":"static/js/16.2a5c3133.chunk.js","sourcesContent":["\r\n\r\nimport { Component } from 'react'\r\nimport './phoneBindLogin.scss'\r\nimport { Form , Button} from 'antd';\r\nimport InputComponent from 'views/login/component/inputComponent';\r\nimport { util } from 'utils/user'\r\nimport {doBindPhone} from 'service/login'\r\nimport $message from 'views/component/message';\r\n\r\n\r\nimport logoimg from 'public/images/logow.png'\r\nimport warnimg from 'public/images/warn.png'\r\nimport unselectimg from 'public/images/unselect.png'\r\nimport selectimg from 'public/images/select.png'\r\n\r\nexport default class phoneBindLogin extends Component {\r\n    state={\r\n        warnMessage:'',//input框验证错误\r\n        inviteCode:sessionStorage.getItem('inviteCode')?sessionStorage.getItem('inviteCode'):'',//邀请码默认值\r\n        agree:false,//是否阅读并同意协议的默认值\r\n        mobileValue:'',\r\n        acode:'86',\r\n        captchaShow:false,//图形验证码是否显示\r\n    }\r\n    \r\n    registerSubmit=async(value)=>{\r\n        console.log(value)\r\n        let mobile = util.validate_mobile(value.mobile),message  \r\n        let {captchaShow} = this.state\r\n        if(captchaShow){\r\n            let captcha =  util.validate_captcha(value.captcha)\r\n            message = mobile?mobile:captcha?captcha:util.validate_yzm(value.sms)\r\n        }else{\r\n            message = mobile?mobile:util.validate_yzm(value.sms)\r\n        }\r\n        this.setState({warnMessage:message})\r\n        if(!message){\r\n            if(!this.state.agree){\r\n                this.setState({warnMessage:'请阅读并同意《药智网用户须知》'})\r\n            }else{\r\n                console.log('meiwenti')\r\n                value.acode='+'+value.acode\r\n                const res =await doBindPhone({...value,type:3})\r\n                $message.info(res.message)\r\n                if(res.status){\r\n                    window.location.href='/'\r\n                }else{\r\n                    if(res.errno && res.body>=3 || res.message==='captcha: 不能为空'){\r\n                        this.setState({captchaShow:true})\r\n                    }else{\r\n                        $message.info(res.message)\r\n                    }\r\n                    \r\n                }            \r\n                \r\n            }            \r\n        }      \r\n    }\r\n    toIndex=()=>{\r\n        window.location.href='/'\r\n    }\r\n    componentDidMount(){\r\n        document.title = '康州数智-绑定手机号码'\r\n        document.body.style.overflow='hidden'\r\n    }\r\n    render(){\r\n        let {warnMessage,mobileValue,acode,captchaShow} = this.state\r\n        return <div id='register'>\r\n            <div className='content'>\r\n                <div className='logoimg fleximg'><img src={logoimg} alt=\"logo\" onClick={this.toIndex} /></div>\r\n                \r\n                    <div className='forget'>\r\n                        <div className='forgettitle'>手机号绑定</div>\r\n                        <div className='forgetform'>\r\n                            <Form\r\n                                onFinish={this.registerSubmit}\r\n                                onFinishFailed={this.registerSubmit}\r\n                            >\r\n                                <div className='marg'>\r\n                                    <InputComponent \r\n                                        GETFalseMessage={(val)=>{this.setState({warnMessage:val})}} \r\n                                        formName='mobile' \r\n                                        name='mobile'\r\n                                        MobileValue={(val)=>{this.setState({mobileValue:val})}} \r\n                                        Acode={(val)=>{this.setState({acode:val})}}\r\n                                    />\r\n                                </div>\r\n                                {captchaShow && <div className='marg'>\r\n                                    <InputComponent \r\n                                        GETFalseMessage={(val)=>{this.setState({warnMessage:val})}} \r\n                                        formName='captcha' \r\n                                        name='captcha' \r\n                                    />\r\n                                </div>\r\n                                }      \r\n                                <div className='marg'>\r\n                                    <InputComponent \r\n                                        GETFalseMessage={(val)=>{this.setState({warnMessage:val})}} \r\n                                        formName='sms' \r\n                                        name='mobileYZM'\r\n                                        mobileValue={mobileValue}\r\n                                        acode={acode}\r\n                                    />\r\n                                </div>\r\n                                <div className='marg'>\r\n                                    <InputComponent GETFalseMessage={(val)=>{this.setState({warnMessage:val})}} formName='invite_code' name='inviteCode' defaultValue={this.state.inviteCode}/>\r\n                                </div>\r\n                                {\r\n                                    warnMessage && <div className='warnnext flexll'>\r\n                                    <div><img src={warnimg} alt=\"warn\" /></div>\r\n                                    <span>{warnMessage}</span>\r\n                                </div> \r\n                                }\r\n                                \r\n                                <Button className='forgetnextbt' htmlType=\"submit\">绑定手机</Button>\r\n                                <div className='flexl agree' onClick={()=>{this.setState({agree:!this.state.agree})}}>\r\n                                    {this.state.agree?\r\n                                        (<div><img src={selectimg} alt=\"checked\" /></div> ):\r\n                                        (<div><img src={unselectimg} alt=\"unchecked\" /></div> )\r\n                                    }\r\n                                    <span>我已阅读并同意</span>\r\n                                    <span className='Link'>《药智网用户须知》</span>\r\n                                    {/* <Link>《药智网用户须知》</Link>                                    */}\r\n                                </div>\r\n                            </Form>\r\n                        </div>\r\n                    </div>\r\n               \r\n            </div>\r\n        </div>\r\n    }\r\n    \r\n}"],"sourceRoot":""}