{"version":3,"sources":["utils/request.ts","store/constants.js","store/reducer.js","store/index.js","utils/news.ts","views/component/message/index.tsx","views/component/message/Msg.tsx","service/login.ts","store/actionCreators.js","FrontendAuth.js","routerMap.js","router/index.jsx","reportWebVitals.ts","index.tsx"],"names":["get","url","params","Promise","resolve","reject","axios","then","response","data","catch","error","message","info","post","err","defaults","timeout","baseURL","interceptors","request","use","config","JSON","stringify","headers","res","status","errno","window","location","pathname","href","errnoMsg","console","log","SetUserInfo","RemoveUserInfo","LoginShow","LoginRemove","defaultState","userInfo","loginShow","reducer","state","action","type","store","createStore","require","util","getScrollTop","bodyScrollTop","documentScrollTop","document","body","scrollTop","documentElement","getScrollHeight","bodyScrollHeight","documentScrollHeight","scrollHeight","getWindowHeight","compatMode","clientHeight","getIsTOBottom","firstTokenUserinfo","a","getUser","result","dispatch","setUserInfo","getUrlParam","name","reg","RegExp","r","search","substring","match","decodeURI","add","Msg","text","className","MessageContainer","useState","lists","setList","option","pre","obj","setTimeout","L","key","filter","each","remove","useEffect","length","shift","map","getId","Math","random","toFixed","$message","success","warning","el","getElementById","createElement","id","append","ReactDOM","createMessage","dologin","captcha","sendSms","sendSmsreg","doreg","loginOut","doWechat","doBindPhone","wechatLink","removeUserInfo","loginRemove","FrontendAuth","props","this","routerConfig","isLogin","getState","targetRouterConfig","find","item","path","auth","component","exact","to","Component","Loading","Login","loadable","LoadingComponent","Register","routerMap","IRouter","React","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","render"],"mappings":"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","file":"static/js/main.2fa635fd.chunk.js","sourcesContent":["/**\r\n * 网络请求配置\r\n */\r\n import axios from \"axios\";\r\n import message from '../views/component/message/index'\r\nimport { AxisPointerComponent } from \"echarts/components\";\r\n\r\n axios.defaults.timeout = 10000;\r\n axios.defaults.baseURL = \"/api\";\r\n\r\n\r\n \r\n /**\r\n  * http request 拦截器\r\n  */\r\n axios.interceptors.request.use(\r\n   (config) => {   \r\n     config.data = JSON.stringify(config.data);\r\n      config.headers = {\r\n        \"Content-Type\": \"application/json\"\r\n      };\r\n     return config;\r\n   },\r\n   (error) => {\r\n     return Promise.reject(error);\r\n   }\r\n );\r\n \r\n /**\r\n  * http response 拦截器\r\n  */\r\n axios.interceptors.response.use(\r\n   (response) => {\r\n    errnoMsg(response)\r\n    //  if (response.data.errno === 10620) {\r\n    //    console.log(\"登录状态过期\");\r\n    //    let url = window.location.pathname==='/app/login'?'/app/login':'/app/login?url='+window.location.pathname\r\n    //    window.location.href=url\r\n    //    message.info('登录状态过期，请再次登录')\r\n    //  }\r\n    //  if(response.data.errno === 10403){\r\n    //     message.info('非法token')\r\n        \r\n    //  }\r\n     return response;\r\n   },\r\n   (error) => {\r\n     console.log(\"请求出错：\", error);\r\n     message.info( error)\r\n   }\r\n );\r\n \r\n /**\r\n  * 封装get方法\r\n  * @param url  请求url\r\n  * @param params  请求参数\r\n  * @returns {Promise}\r\n  */\r\n export function get(url, params = {}) {\r\n   return new Promise<API.IResult>((resolve, reject) => {\r\n     axios.get(url, {\r\n         params: params,\r\n       }).then((response) => {\r\n         resolve(response.data);\r\n       })\r\n       .catch((error) => {\r\n        message.info(error)\r\n         reject(error);\r\n       });\r\n   });\r\n }\r\n \r\n /**\r\n  * 封装post请求\r\n  * @param url\r\n  * @param data\r\n  * @returns {Promise}\r\n  */\r\n \r\n export function post(url, data) {\r\n   return new Promise<API.IResult>((resolve, reject) => {\r\n     axios.post(url, data).then(\r\n       (response) => {\r\n         //关闭进度条\r\n         resolve(response.data);\r\n       },\r\n       (err) => {\r\n        message.info(err.data.message)\r\n         reject(err);\r\n       }\r\n     );\r\n   });\r\n }\r\n \r\n /**\r\n  * 封装patch请求\r\n  * @param url\r\n  * @param data\r\n  * @returns {Promise}\r\n  */\r\n export function patch(url, data = {}) {\r\n   return new Promise((resolve, reject) => {\r\n     axios.patch(url, data).then(\r\n       (response) => {\r\n         resolve(response.data);\r\n       },\r\n       (err) => {\r\n         msag(err);\r\n         reject(err);\r\n       }\r\n     );\r\n   });\r\n }\r\n \r\n /**\r\n  * 封装put请求\r\n  * @param url\r\n  * @param data\r\n  * @returns {Promise}\r\n  */\r\n \r\n export function put(url, data = {}) {\r\n   return new Promise((resolve, reject) => {\r\n     axios.put(url, data).then(\r\n       (response) => {\r\n         resolve(response.data);\r\n       },\r\n       (err) => {\r\n         msag(err);\r\n         reject(err);\r\n       }\r\n     );\r\n   });\r\n }\r\n \r\n //统一接口处理，返回数据\r\n export default function (fecth, url, param) {\r\n   let _data = \"\";\r\n   return new Promise((resolve, reject) => {\r\n     switch (fecth) {\r\n       case \"get\":\r\n         console.log(\"begin a get request,and url:\", url);\r\n         get(url, param)\r\n           .then(function (response) {\r\n             resolve(response);\r\n           })\r\n           .catch(function (error) {\r\n             console.log(\"get request GET failed.\", error);\r\n             reject(error);\r\n           });\r\n         break;\r\n       case \"post\":\r\n         post(url, param)\r\n           .then(function (response) {\r\n             resolve(response);\r\n           })\r\n           .catch(function (error) {\r\n             console.log(\"get request POST failed.\", error);\r\n             reject(error);\r\n           });\r\n         break;\r\n       default:\r\n         break;\r\n     }\r\n   });\r\n }\r\n //统一接口status为0，errno的不同值做处理\r\n function errnoMsg(res){\r\n   if(!res.data.status){\r\n     switch(res.data.errno){\r\n       case 10500: message.info('服务器未知错误');break;\r\n       case 10400: message.info('错误的请求');break;\r\n       case 10403: message.info('非法token');break;\r\n       case 10600: message.info('业务异常');break;\r\n       case 10610: message.info('参数校验失败');break;\r\n       case 10611: message.info('参数转换失败');break;\r\n       case 10620: \r\n         message.info('身份认证失败');\r\n          window.location.pathname==='/app/user' && (window.location.href='/app/login?url='+window.location.pathname)\r\n        break;\r\n       case 10621: message.info('未授权');break;\r\n       case 10622: message.info('用户未找到');break;\r\n       case 10623: message.info('用户已禁用');break;\r\n       case 10624: message.info('密码错误');break;\r\n       case 10625: message.info('用户绑定失败');\r\n     }\r\n   }\r\n }\r\n //失败提示\r\n function msag(err) {\r\n   if (err && err.response) {\r\n     switch (err.response.status) {\r\n       case 400:\r\n         alert(err.response.data.error.details);\r\n         break;\r\n       case 401:\r\n         alert(\"未授权，请登录\");\r\n         break;\r\n \r\n       case 403:\r\n         alert(\"拒绝访问\");\r\n         break;\r\n \r\n       case 404:\r\n         alert(\"请求地址出错\");\r\n         break;\r\n \r\n       case 408:\r\n         alert(\"请求超时\");\r\n         break;\r\n \r\n       case 500:\r\n         alert(\"服务器内部错误\");\r\n         break;\r\n \r\n       case 501:\r\n         alert(\"服务未实现\");\r\n         break;\r\n \r\n       case 502:\r\n         alert(\"网关错误\");\r\n         break;\r\n \r\n       case 503:\r\n         alert(\"服务不可用\");\r\n         break;\r\n \r\n       case 504:\r\n         alert(\"网关超时\");\r\n         break;\r\n \r\n       case 505:\r\n         alert(\"HTTP版本不受支持\");\r\n     }\r\n   }\r\n }\r\n \r\n /**\r\n  * 查看返回的数据\r\n  * @param url\r\n  * @param params\r\n  * @param data\r\n  */\r\n function landing(url, params, data) {\r\n   console.log(url)\r\n   if (data.code === -1) {\r\n   }\r\n }\r\n \r\n ","export const SetUserInfo = \"SetUserInfo\";\r\nexport const RemoveUserInfo = \"RemoveUserInfo\";\r\nexport const LoginShow = \"LoginShow\"\r\nexport const LoginRemove = \"LoginRemove\"\r\n","import { SetUserInfo, RemoveUserInfo,LoginShow,LoginRemove } from \"./constants.js\";\r\n\r\nconst defaultState = {\r\n    userInfo: null,\r\n    loginShow:false\r\n};\r\n\r\nfunction reducer(state = defaultState, action) {\r\n  switch (action.type) {\r\n    case SetUserInfo:\r\n      return {\r\n        ...state,\r\n        userInfo: action.userInfo,\r\n      };\r\n    case RemoveUserInfo:\r\n      return {\r\n        ...state,\r\n        userInfo: null,\r\n      };\r\n    case LoginShow:\r\n      return {\r\n        ...state,\r\n        loginShow: true,\r\n      };\r\n    case LoginRemove:\r\n      return {\r\n        ...state,\r\n        loginShow: false,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default reducer;","// 2. 引入reducer\r\nimport reducer from \"./reducer.js\";\r\n// 3.创建一个store\r\nconst {createStore} = require(\"redux\");\r\nconst store = createStore(reducer)\r\n\r\nexport default store;\r\n","//@ts-nocheck\r\nimport { getUser } from \"service/login\";\r\nimport store from \"store\";\r\nimport { setUserInfo } from \"store/actionCreators\";\r\nexport const util = {\r\n    getScrollTop : () => {\r\n        var scrollTop = 0, bodyScrollTop = 0, documentScrollTop = 0;\r\n        if(document.body){\r\n          bodyScrollTop = document.body.scrollTop;\r\n        }\r\n        if(document.documentElement){\r\n          documentScrollTop = document.documentElement.scrollTop;\r\n        }\r\n        scrollTop = (bodyScrollTop - documentScrollTop > 0) ? bodyScrollTop : documentScrollTop;\r\n        return scrollTop;\r\n      },\r\n    getScrollHeight : () => {\r\n        var scrollHeight = 0, bodyScrollHeight = 0, documentScrollHeight = 0;\r\n        if(document.body){\r\n            bodyScrollHeight = document.body.scrollHeight;\r\n        }\r\n        if(document.documentElement){\r\n            documentScrollHeight = document.documentElement.scrollHeight;\r\n        }\r\n        scrollHeight = (bodyScrollHeight - documentScrollHeight > 0) ? bodyScrollHeight : documentScrollHeight;\r\n        return scrollHeight;\r\n    },\r\n    getWindowHeight : () => {\r\n        var windowHeight = 0;\r\n        if(document.compatMode == \"CSS1Compat\"){\r\n            windowHeight = document.documentElement.clientHeight;\r\n        }else{\r\n            windowHeight = document.body.clientHeight;\r\n        }\r\n        return windowHeight;\r\n    },\r\n    getIsTOBottom:()=>{\r\n        return util.getScrollHeight() - util.getScrollTop() - util.getWindowHeight()\r\n    },\r\n    firstTokenUserinfo:async()=>{\r\n        const result = await getUser()\r\n        result.status && store.dispatch(setUserInfo(result.body))\r\n    },\r\n    getUrlParam:(name)=>{\r\n        var reg = new RegExp(\"(^|&)\"+ name +\"=([^&]*)(&|$)\");\r\n        var r = window.location.search.substring(1).match(reg);\r\n        if(r!=null)return  decodeURI(r[2]); return null;\r\n    }\r\n}","// index.tsx\r\nimport { useState,useEffect } from 'react';\r\nimport * as ReactDOM from 'react-dom';\r\nimport Msg from './Msg';\r\nimport { MessageApi,List } from './config';\r\nimport './index.scss';\r\n\r\nlet add: (L: List) => void;\r\nexport const MessageContainer = () => {\r\n  const [lists ,setList] = useState<List[]>([]);\r\n  const remove = (L:List) => {\r\n    const { key } = L;\r\n    setList((pre:List[]) => ( pre.filter((each:List) => key !== each.key) ))\r\n  }\r\n\r\n  add = (option:List) => {\r\n    setList((pre:List[])=>{\r\n      const obj = [...pre,option ];\r\n      setTimeout(() => {\r\n          remove(option)\r\n        }, 1500)\r\n        return obj\r\n    })\r\n    // 最好不用下面这个写法，当同时调用两个message时候，只会显示最后调用那次\r\n    // const obj = [...lists,option ];\r\n    // setList(obj);\r\n    // setTimeout(() => {\r\n    //   remove(option)\r\n    // }, timeout)\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (lists.length > 0) {\r\n      lists.shift();\r\n    }\r\n  }, [lists])\r\n\r\n  return (\r\n    <>\r\n      {\r\n        lists.map(({ text, key, type }) => (\r\n            <Msg key={key} type={type} text={text} />\r\n        ))\r\n      }\r\n    </>\r\n  )\r\n} \r\n\r\n// 获取唯一id\r\nconst getId = () => {\r\n  return (Math.random() * 1000).toFixed()\r\n}\r\n\r\n// 暴露的message-API\r\nconst $message: MessageApi = {\r\n  info: (text) => {\r\n    add({\r\n      text,\r\n      key: getId(),\r\n      type: 'info'\r\n    })\r\n  },\r\n  success: (text) => {\r\n    add({\r\n      text,\r\n      key: getId(),\r\n      type: 'success'\r\n    })\r\n  },\r\n  warning: (text) => {\r\n    add({\r\n      text,\r\n      key: getId(),\r\n      type: 'warning'\r\n    })\r\n  },\r\n  error: (text) => {\r\n    add({\r\n      text,\r\n      key: getId(),\r\n      type: 'error'\r\n    })\r\n  }\r\n}\r\nexport default $message;\r\n\r\n// 挂载容器到页面\r\nconst createMessage = () => {\r\n  let el = document.getElementById('#message-wrap');\r\n  // 这一步是必要的的，因为在执行到这里的时候，页面还没有挂载，所以获取不到el节点\r\n  if (!el) {\r\n      el = document.createElement('div')\r\n      el.className = 'message-wrap'\r\n      el.id = 'message-wrap'\r\n      document.body.append(el)\r\n  }\r\n  ReactDOM.render( <MessageContainer />, el);\r\n}\r\ncreateMessage();\r\n\r\n","// Msg.tsx\r\nconst Msg = ({type, text }:{ type:string,text: string }) => {\r\n    return (\r\n          <div className={`message ${type}`}>\r\n              {/* <span className='icon' /> */}\r\n              <span>{text}</span>\r\n          </div>\r\n    );\r\n  };\r\n  \r\n  export default Msg;\r\n  \r\n  ","import {get, post} from '../utils/request'\r\n\r\nexport const dologin =(data):Promise<API.IResult>=>{\r\n    return  post('login/dologin',data)\r\n}\r\n\r\nexport const captcha  =():Promise<API.IResult>=>{\r\n    return  get('user/public/captcha')\r\n}\r\n\r\nexport const sendSms =(data):Promise<API.IResult>=>{\r\n    return  post('login/send-sms',data)\r\n}\r\n\r\nexport const sendSmsreg =(data):Promise<API.IResult>=>{\r\n    return  post('login/send-sms-reg',data)\r\n}\r\n\r\nexport const getUser =():Promise<API.IResult>=>{\r\n    return  get('user/public/get-user')\r\n}\r\n\r\nexport const doreg =(data):Promise<API.IResult>=>{\r\n    return  post('login/doreg',data)\r\n}\r\n\r\n\r\nexport const loginOut =():Promise<API.IResult>=>{\r\n    return  get('login/login-out')\r\n}\r\n\r\n//微信扫码获取code后传后端\r\nexport const doWechat =(data):Promise<API.IResult>=>{\r\n    return  post('login/wechat/callback',data)\r\n}\r\n\r\n//绑定手机号\r\nexport const doBindPhone =(data):Promise<API.IResult>=>{\r\n    return  post('login/wechat/bind.do',data)\r\n}\r\n\r\n//获取微信登录二维码链接\r\nexport const wechatLink =(data):Promise<API.IResult>=>{\r\n    return  get('login/wechat/qrinfo',data)\r\n}\r\n\r\n","// 引入需要使用的 常量\r\nimport { SetUserInfo, RemoveUserInfo,LoginShow,LoginRemove } from \"./constants.js\";\r\n// 存储用户信息\r\nexport const setUserInfo = (userInfo) => {\r\n  return {\r\n    type: SetUserInfo,\r\n    userInfo,\r\n  };\r\n};\r\n// 删除用户信息\r\nexport const removeUserInfo = () => ({\r\n  type: RemoveUserInfo\r\n});\r\n\r\n//设定悬浮框登录显示\r\nexport const loginShow = () => ({\r\n  type: LoginShow\r\n})\r\n\r\n//设定悬浮框登录消失\r\nexport const loginRemove = () => ({\r\n  type: LoginRemove\r\n})","/**\r\n * 路由守卫校验\r\n */\r\n import { Divider } from \"antd\";\r\nimport React, {Component} from \"react\";\r\n import {Route, Redirect} from \"react-router-dom\";\r\n import store from \"store\";\r\n \r\n class FrontendAuth extends Component {\r\n     // eslint-disable-next-line no-useless-constructor\r\n     constructor(props) {\r\n         super(props);\r\n     }\r\n \r\n     render() {\r\n         const {routerConfig, location} = this.props;\r\n         const {pathname} = location;\r\n         const isLogin = store.getState().userInfo;\r\n        //  console.log(pathname, isLogin);\r\n        //  console.log(location);\r\n\r\n         // 如果该路由不用进行权限校验，登录状态下登陆页除外\r\n         // 因为登陆后，无法跳转到登陆页\r\n         // 这部分代码，是为了在非登陆状态下，访问不需要权限校验的路由\r\n         const targetRouterConfig = routerConfig.find(\r\n             (item) => item.path === pathname\r\n         );\r\n        //  console.log(targetRouterConfig);\r\n         if (targetRouterConfig && !targetRouterConfig.auth && !isLogin) {\r\n             const {component} = targetRouterConfig;\r\n             return <Route exact path={pathname} component={component}/>;\r\n         }\r\n         if (isLogin) {\r\n             // 如果是登陆状态，想要跳转到登陆，重定向到主页,但是这里的主页是另一个项目的HTML，像这样重定向页面不会跳转，所以暂时重定向到个人中心\r\n             if (pathname === \"/app/login\") {\r\n                 return <Redirect to=\"/app/user\"/>;\r\n             } else {\r\n                 // 如果路由合法，就跳转到相应的路由\r\n                 if (targetRouterConfig) {\r\n                     return (\r\n                         <Route path={pathname} component={targetRouterConfig.component}/>\r\n                     );\r\n                 } else {\r\n                     // 如果路由不合法，重定向到 404 页面\r\n                    return <Redirect to={pathname}/>;\r\n                 }\r\n             }\r\n         } else {\r\n             // 非登陆状态下，当路由合法时且需要权限校验时，跳转到登陆页面，要求登陆\r\n             if(targetRouterConfig){                \r\n                if(targetRouterConfig.auth){\r\n                    return <Redirect to=\"/app/login\"/>;\r\n                }else{\r\n                    <Route path={pathname} component={targetRouterConfig.component}/>\r\n                }\r\n             }else {\r\n                // 如果路由不合法，重定向到 404 页面\r\n                return <Redirect to={pathname}/>;\r\n            }\r\n             \r\n         }\r\n     }\r\n }\r\n \r\n export default FrontendAuth;\r\n \r\n ","import loadable from 'loadable-components'     //npm i loadable-components 用作解决路由懒加载\r\nconst Loading = () => <div>Loading...</div>\r\n \r\nconst Home = loadable(() => import('views/home'), {\r\n    LoadingComponent: Loading,\r\n})\r\nconst Login = loadable(() => import('views/login/login'), {\r\n    LoadingComponent: Loading,\r\n})\r\n\r\nconst Register = loadable(() => import('views/login/register'), {\r\n    LoadingComponent: Loading,\r\n})\r\n\r\nconst User = loadable(() => import('views/user/user'), {\r\n    LoadingComponent: Loading,\r\n})\r\n//新闻列表页\r\nconst News = loadable(()=> import('views/news/news'), {\r\n    LoadingComponent: Loading,\r\n})\r\n//新闻详情页\r\nconst NewsDetail = loadable(()=> import('views/news/newsDetail'), {\r\n    LoadingComponent: Loading,\r\n})\r\n//文章作者的更多页面\r\nconst NewsAuthorMore = loadable(()=> import('views/news/authorMore'), {\r\n    LoadingComponent: Loading,\r\n})\r\n//第三方登录页面，空白页面，承载逻辑，分流跳转到相应页面，目前只有微信登录\r\nconst otherLogin = loadable(()=> import('views/login/component/othorLogin/otherLoginIndex'), {\r\n    LoadingComponent: Loading,\r\n})\r\n//手机绑定页面,验证成功后会登陆\r\nconst phoneBindLogin = loadable(()=> import('views/login/component/othorLogin/phoneBindLogin/phoneBindLogin'), {\r\n    LoadingComponent: Loading,\r\n})\r\n\r\n\r\nexport const routerMap = [\r\n    {path: \"/app/user\", name: \"User\", component: User, auth: true},\r\n    {path: \"/app/login\", name: \"Login\", component: Login},\r\n    {path: \"/app/register/register\", name: \"Register\", component: Register},\r\n    {path: \"/app/register/forget\", name: \"Register\", component: Register},\r\n    {path: \"/app/news\", name: \"News\", component: News},\r\n    {path: \"/app/newsdetail\", name: \"NewsDetail\", component: NewsDetail},\r\n    {path: \"/app/newsauthormore\", name: \"NewsAuthorMore\", component: NewsAuthorMore},\r\n    {path: \"/app/wechat/callback.do\", name: \"otherLogin\", component: otherLogin},\r\n    {path: \"/app/bindphone\", name: \"phoneBindLogin\", component: phoneBindLogin},\r\n];","import React,{Fragment} from 'react'\r\nimport loadable from 'loadable-components'     //npm i loadable-components 用作解决路由懒加载\r\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom'\r\nimport FrontendAuth from \"FrontendAuth\";\r\nimport {routerMap} from \"routerMap\";\r\n// import NotFound from '../views/notFound'\r\n \r\n// const Loading = () => <div>Loading...</div>\r\n \r\n// const Home = loadable(() => import('../views/home'), {\r\n//     LoadingComponent: Loading,\r\n// })\r\n// const Login = loadable(() => import('../views/login/login'), {\r\n//     LoadingComponent: Loading,\r\n// })\r\n\r\n// const Register = loadable(() => import('../views/login/register'), {\r\n//     LoadingComponent: Loading,\r\n// })\r\n\r\n// const User = loadable(() => import('../views/user/user'), {\r\n//     LoadingComponent: Loading,\r\n// })\r\n// //新闻列表页\r\n// const News = loadable(()=> import('../views/news/news'), {\r\n//     LoadingComponent: Loading,\r\n// })\r\n// //新闻详情页\r\n// const NewsDetail = loadable(()=> import('../views/news/newsDetail'), {\r\n//     LoadingComponent: Loading,\r\n// })\r\n// //文章作者的更多页面\r\n// const NewsAuthorMore = loadable(()=> import('../views/news/authorMore'), {\r\n//     LoadingComponent: Loading,\r\n// })\r\n// const Develop = loadable(() => import('../views/develop.tsx'), {\r\n//     LoadingComponent: Loading,\r\n// })\r\n// const Oss = loadable(() => import('../views/ossImg.tsx'), {\r\n//     LoadingComponent: Loading,\r\n// })\r\n \r\n \r\nclass IRouter extends React.Component {\r\n    render() {\r\n        return (\r\n            <Router>\r\n                <Fragment>\r\n                    {/*只匹配一个，匹配成功就不往下匹配，效率高*/}\r\n                    <Switch>\r\n                        <FrontendAuth routerConfig={routerMap}/>\r\n                    </Switch>\r\n                </Fragment>\r\n       \r\n                </Router>\r\n        )\r\n    }\r\n}\r\nexport default IRouter","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'index.scss';\r\nimport Router from 'router/index'\r\nimport reportWebVitals from 'reportWebVitals';\r\nimport {util} from 'utils/news'\r\n\r\nutil.firstTokenUserinfo().then(()=>{\r\n  ReactDOM.render(\r\n\r\n      <Router />,\r\n    document.getElementById('root')\r\n  );\r\n})\r\n\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n// util.firstToken()\r\n"],"sourceRoot":""}